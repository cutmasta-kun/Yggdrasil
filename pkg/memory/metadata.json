{
    "title": "My Datasette Instance",
    "databases": {
        "messages": {
            "queries": {
                "get_messages": {
                    "sql": "SELECT * FROM messages ORDER BY created_at DESC",
                    "title": "Get Messages"
                },
                "add_message": {
                    "sql": "INSERT INTO messages (uuid, message) VALUES (:uuid, :message)",
                    "write": true,
                    "on_success_message": "Message inserted",
                    "on_success_redirect": "/messages/get_message_by_uuid.json?uuid=",
                    "on_error_message": "Message insert failed",
                    "on_error_redirect": "/messages.json"
                },
                "get_message_by_uuid": {
                    "sql": "SELECT * FROM messages WHERE uuid = :uuid",
                    "title": "Get Message by UUID"
                },
                "get_memories": {
                    "sql": "SELECT substr(message, 1, 50) || CASE WHEN length(message) > 50 THEN '...' ELSE '' END as message, uuid FROM messages ORDER BY created_at DESC",
                    "title": "Get Memories"
                },
                "add_memory": {
                    "sql": "INSERT INTO messages (uuid, message) VALUES (:uuid, :message)",
                    "write": true,
                    "on_success_message": "Memory inserted",
                    "on_success_redirect": "/messages/get_memory_by_uuid.json?uuid=",
                    "on_error_message": "Message insert failed",
                    "on_error_redirect": "/messages.json"
                },
                "get_memory_by_uuid": {
                    "sql": "SELECT * FROM messages WHERE uuid = :uuid",
                    "title": "Get Memories by UUID"
                } 
            }
        }
    }
}
